# scripts_OSCAR_CMIP6
This repository gathers all the scripts used for the publication of "CMIP6 simulations with the compact Earth system model OSCAR v3.1" (https://doi.org/10.5194/gmd-2021-412). It relies on the reduced complexity Earth system model OSCAR v3.1 (https://github.com/tgasser/OSCAR). Any user interested in running this code is strongly recommended to use OSCAR v3.1.

The scripts make use of xarray package (v0.16.0), and netCDF4 for saving data (v1.5.3). It also relies on other common scientific packages: numpy (v1.19.2), scipy (v1.5.2) and matplotlib (v3.5.2).

Please note that these scripts are provided as they were used. No further refactoring or cleaning has been performed. It implies that the code will not be user-friendly. This code being provided for transparency, no support of any kind is guaranteed, but feel free to ask.

To replicate the results of "CMIP6 simulations with the compact Earth system model OSCAR v3.1", here is the order to run the scripts:
 - "/run_scripts/scripts_CMIP6/_RUN-ALL_OSCARv3-CMIP6.py": computation of the experiments by OSCAR. The outputs are files for the parameters, the forcings and the results from OSCAR. It calls individual scripts in the same folder ("OSCARv3-[experiment].py"), taking into account dependencies between experiments. Running individual experiments using these scripts is indeed possible, but require of the user a better understanding of the dependencies between the experiments (e.g. for initialization, a ssp126 would need the historical, which in turn needs a spin-up, all of them with the same set of parameters for OSCAR).
 - "run_scripts/scripts_CMIP6/_extract_extra_var.py": computation of additional variables by OSCAR. The outputs are additional files of outputs for each experiment. OSCAR saves a set of variables defined by the user, so that the others can be deduced from the saved ones. It will be used to accelerate the next steps by not recalculating everytime the same variables.
 - "run_scripts/scripts_CMIP6/_extract_mask.py": identify and discard diverging configurations. The outputs are masks at different level. NB: other masks were investigated but we recommend using these masks ("uniform") for replication.
 - "run_scripts/RCMIP_phase2/get_RCMIP_phase2_indicators.py": computation of unconstrained OSCAR to the assessed ranges from RCMIP phase 2. Outputs are values of OSCAR for each one of these indicators. NB: others weights were investigated, but the ones produced by this script are the ones used the contribution of OSCAR to RCMIP phase 2 and the runs in the aforementioned publication.
 - "run_scripts/scripts_CMIP6/_PLOT_OSCARv3-CMIP6.py": compute the data, realize the tables and produce the plots used in the publication "CMIP6 simulations with the compact Earth system model OSCAR v3.1". This script is not refactored, thus not user-friendly.
